---
import Card from '../components/Card.astro';
const { posts, cssMod = '' } = Astro.props;
const htmlClasses = `bloglist ${cssMod}`; 

// In prod, hide posts flagged as dev-only
const visiblePosts = (posts || []).filter((p) => {
	const devOnly = Boolean(p?.data?.onlyDev);
	return import.meta.env.DEV || !devOnly;
});
---
<ul class={htmlClasses}>
	{visiblePosts.map((post) => (
		<li class="bloglist__item">
			<Card {post} />
		</li>
	))}
</ul>

<style>
	.bloglist {
		display: grid;
		grid-template-columns: 1fr;
		gap: 2rem;
		list-style-type: none;
		margin: 0;
		padding-inline: var(--space-s);
		max-inline-size: 900px;
		margin-inline: auto;
	}

	.bloglist__item {
		margin: 0
	}

	@media (width > 900px) {
		.bloglist {
			grid-template-columns: 1fr 1fr;
		}

		.bloglist.hero .bloglist__item:first-child {
			grid-column: span 2;
		}
	}
</style>